{%- comment -%}
  VIP CTA Section
  A seção destaca o Grupo VIP com descrição, lista de benefícios e um botão chamativo.
  Todos os textos e benefícios são editáveis via painel.
{%- endcomment -%}

{%- assign start_color = section.settings.bg_gradient_start | default: '#111111' -%}
{%- assign end_color = section.settings.bg_gradient_end | default: '#1c1c1c' -%}
{%- assign bg_angle = section.settings.bg_angle | default: 135 -%}

<section id="vip-cta" class="vip-cta-section" style="background: linear-gradient({{ bg_angle }}deg, {{ start_color }} 0%, {{ end_color }} 100%);">
  <div class="vip-cta-container page-width">
    <div class="vip-cta-content">
      <header class="vip-cta-header">
        {%- if section.settings.subheading != blank -%}
          <p class="vip-cta-subtitle">{{ section.settings.subheading }}</p>
        {%- endif -%}
        <h2 class="vip-cta-title">{{ section.settings.heading | default: 'Faça parte do Grupo VIP' }}</h2>
        {%- if section.settings.description != blank -%}
          <div class="vip-cta-description">{{ section.settings.description }}</div>
        {%- endif -%}
      </header>

      {%- if section.blocks.size > 0 -%}
      <ul class="vip-cta-benefits" role="list">
        {%- for block in section.blocks -%}
          {%- if block.type == 'benefit' -%}
            <li class="vip-cta-benefit" {{ block.shopify_attributes }}>
              <span class="vip-cta-benefit-icon" aria-hidden="true">
                {%- case block.settings.icon -%}
                  {%- when 'star' -%}{% render 'icon-star' %}
                  {%- when 'heart' -%}{% render 'icon-heart' %}
                  {%- when 'like' -%}{% render 'icon-like' %}
                  {%- when 'fire' -%}{% render 'icon-fire' %}
                  {%- when 'globe' -%}{% render 'icon-globe' %}
                  {%- else -%}{% render 'icon-star' %}
                {%- endcase -%}
              </span>
              <div class="vip-cta-benefit-texts">
                {%- if block.settings.title != blank -%}
                  <h3 class="vip-cta-benefit-title">{{ block.settings.title }}</h3>
                {%- endif -%}
                {%- if block.settings.text != blank -%}
                  <p class="vip-cta-benefit-text">{{ block.settings.text }}</p>
                {%- endif -%}
              </div>
            </li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
      {%- endif -%}

      <div class="vip-button-wrapper">
        <a href="#" class="vip-button vip-button--cta-shiny" aria-label="{{ section.settings.button_aria_label | default: 'Faça parte do grupo VIP' }}">
          {%- if section.settings.show_icon -%}
            <span class="vip-icon">{% render 'icon-star' %}</span>
          {%- endif -%}
          <span class="vip-button-text">{{ section.settings.button_text | default: 'Faça parte do Grupo VIP' }}</span>
        </a>
        <p id="vip-button-description" class="visually-hidden">Botão para participar do Grupo VIP com benefícios exclusivos.</p>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "CTA Grupo VIP",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "Faça parte do Grupo VIP"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subtítulo",
      "default": "Benefícios exclusivos para membros"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Descrição do grupo VIP",
      "default": "<p>Junte-se ao nosso Grupo VIP e tenha acesso antecipado a lançamentos, ofertas especiais e conteúdos exclusivos.</p>"
    },
    {
      "type": "color",
      "id": "bg_gradient_start",
      "label": "Cor de fundo (início)",
      "default": "#0f0f0f"
    },
    {
      "type": "color",
      "id": "bg_gradient_end",
      "label": "Cor de fundo (fim)",
      "default": "#1c1c1c"
    },
    {
      "type": "range",
      "id": "bg_angle",
      "label": "Ângulo do gradiente",
      "min": 0,
      "max": 360,
      "step": 5,
      "default": 135
    },
    {
      "type": "checkbox",
      "id": "show_icon",
      "label": "Mostrar ícone no botão",
      "default": true
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Texto do botão",
      "default": "Faça parte do Grupo VIP"
    },
    {
      "type": "text",
      "id": "button_aria_label",
      "label": "Rótulo ARIA do botão",
      "default": "Faça parte do grupo VIP"
    },
    {
      "type": "text",
      "id": "modal_title",
      "label": "Título do modal",
      "default": "Grupo VIP"
    },
    {
      "type": "text",
      "id": "modal_subtitle",
      "label": "Subtítulo do modal",
      "default": "Desbloqueie benefícios exclusivos para membros VIP"
    },
    {
      "type": "text",
      "id": "submit_text",
      "label": "Texto do botão de envio",
      "default": "Quero participar"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Mensagem de sucesso",
      "default": "Cadastro realizado com sucesso! Você será redirecionado em alguns segundos..."
    },
    
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefício",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Ícone",
          "default": "star",
          "options": [
            {"value": "star", "label": "Estrela"},
            {"value": "heart", "label": "Coração"},
            {"value": "like", "label": "Like"},
            {"value": "fire", "label": "Fogo"},
            {"value": "globe", "label": "Globo"}
          ]
        },
        {
          "type": "text",
          "id": "title",
          "label": "Título do benefício",
          "default": "Acesso antecipado a lançamentos"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Descrição do benefício",
          "default": "Seja o primeiro a conhecer nossos novos produtos e conteúdos."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "CTA Grupo VIP",
      "category": "Seções personalizadas",
      "blocks": [
        {"type": "benefit"},
        {"type": "benefit"},
        {"type": "benefit"}
      ]
    }
  ]
}
{% endschema %}
